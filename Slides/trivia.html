<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/theme.css">
    <link rel="stylesheet" href="css/style.css">
    <title>News</title>
  </head>
  <body>
    <div class="main-container"  id="videos">
        <div class="logo-title">
            SMITH DENTAL
        </div>
        <div class="mySlides news-video">
            <video autoplay muted loop  id="triviaBg">
                <source src="media/theme_01_BG.mp4" type="video/mp4">
            </video>
            <video autoplay muted loop class="trivia-sidebar">
                <source src="media/theme_01_TRIVIA.webm" type="video/webm">
            </video>
            <video autoplay muted loop class="trivia-news">
                <source src="media/theme_01_NEWS.webm" type="video/webm">
            </video>
            <div class="weather-img">
                <img src="media/theme01_WEATHER_Sunny.png" alt="">
            </div>
           
            <div class="trivia">
                <div class="trivia-section"  >
                    <h2 class="title" id="title">Did you know?</h2>
                    <div class="title-border"></div>
                    <h4 class="semi-title orange" id="subtitle">most of the planets in our solar system are named after Greek/Roman gods. </h4>
               </div>
               <div class="trivia-section" style="display: none;">
                <h2 class="title orange">from 1978 to 1999, which planet was farthest from the sun?</h2>
                <div class="title-border"></div>
                <ul class="font-lg multiple-choice" style="display: none;">
                    <li>1) pluto</li>
                    <li>2) neptune</li>
                    <li>3) uranus</li>
                </ul>
                <div class="show-answer"  >
                    <span class="semi-title black">3) uranus</span>
                    <p class="font-md black">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin eget diam scelerisque, iaculis magna fringilla,</p>
                </div>
           </div>
           <driv class="trivia-section" style="display: none;">
            <h2 class="title orange" >The great wall of china is the visible from the moon?
                <span class="semi-title black" >Ture or False?</span>
            </h2>
            <div class="title-border"></div>
            <h4 class="semi-title orange" id="answer">False</h4>
            <p class="font-md black" id="reason">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin eget diam scelerisque, iaculis magna fringilla,</p>
        </div>
            </div>
            <div class="live-news-section">
                <div class="live-news-sub-section">
                    <h2>live news</h2>
                    <div class="live-news-detail">
                        <h3>welcome to our practice!</h3>
                        <div class="news-detail">
                            <p class="news fade">
                                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin eget diam scelerisque, iaculis magna fringilla, vulputate neque.
                            </p>
                            <p class="news fade">
                              adipiscing elit. Proin eget diam scelerisque, iaculis magna fringilla, vulputate neque. Quisque vestibulum efficitur purus ut finibus.
                            </p>
                            <p class="news fade">
                                Lorem ipsum dolor sit amet,  iaculis magna fringilla, vulputate neque. Quisque vestibulum efficitur purus ut finibus.
                            </p>
                            <p class="news fade">
                                Proin eget diam scelerisque, iaculis magna fringilla, vulputate neque. Quisque vestibulum efficitur purus ut finibus.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="wnd"></div>
            <div id="log"></div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script type="text/javascript" src="promise/promise.js"></script>
    <script>
 
        var slideIndex = 0;
        showSlides();
        
        function showSlides() {
          var i;
          var slides = document.getElementsByClassName("news");
          for (i = 0; i < slides.length; i++) {
            slides[i].style.display = "none";  
          }
          slideIndex++;
          if (slideIndex > slides.length) {slideIndex = 1}    

          slides[slideIndex-1].style.display = "block";
          slides[slideIndex-1].className += " active";
          setTimeout(showSlides, 3000);
        }
        </script>
    
        <script>

            $(document).ready(function() {
                animate();               
            });

            async function animate(){
                await firstSlideAnimTitle();
                await firstSlideAnimBorder();
                await firstSlideAnimSubtitle();
            }  

            function firstSlideAnimTitle() {
                $("#subtitle").css("display", "none");
                var humanize = Math.round(Math.random() * (200 - 30)) + 30;
                return new Promise(resolve =>{
                    var $el = $('#title'),  
                    html = $el.html(),
                    txt = $el.text(),
                    txtLen = html.length,
                    timeOut,
                    char = 0;
                    (function typeIt() {   
                        timeOut = setTimeout(function() {
                            char++;
                            var type = html.substring(0, char);
                            $el.html(type);
                            typeIt();
                            if (char == txtLen) {
                                $el.html($el.html().slice(0, -1)); // remove the '|'    
                                return resolve(true);
                            }
                        }, humanize);
                    }());    
                
                });
            }

            function firstSlideAnimBorder(){
                
                return new Promise(resolve =>{
                    console.log("boarder animation code.")    
                    return resolve(true);
                });
                
            }

            function firstSlideAnimSubtitle(){
                $("#subtitle").css("display", "block");
                return new Promise(resolve =>{
                var $st = $('#subtitle'),  
                html2 = $st.html(),
                txt2 = $st.text(),
                txtLen2 = html2.length,
                timeOut,
                char = 0;
                (function typeIt() {   
                    var humanize = Math.round(Math.random() * (200 - 30)) + 30;
                    timeOut = setTimeout(function() {
                        char++;
                        var type = html2.substring(0, char);
                        $st.html(type);
                        typeIt();
                        if (char == txtLen2) {
                            $st.html($st.html().slice(0, -1)); // remove the '|'
                        }

                    }, humanize);
                }());
                    return resolve(true);
                });
            }

            // title function
            

            // var $answer = $('#answer'),  
            // html3 = $answer.html(),
            // txt3 = $answer.text(),
            // txtLen3 = html.length,
            // timeOut,
            // char = 0;
            // (function typeIt() {   
            //     var humanize = Math.round(Math.random() * (200 - 30)) + 30;
            //     timeOut = setTimeout(function() {
            //         char++;
            //         var type = html3.substring(0, char);
            //         $answer.html(type);
            //         typeIt();
            //         if (char == txtLen3) {
            //             $answer.html($answer.html().slice(0, -1)); // remove the '|'
            //         }

            //     }, humanize);
            // }());
            // var $rs = $('#reason'),  
            // html4 = $rs.html(),
            // txt4 = $rs.text(),
            // txtLen4 = html.length,
            // timeOut,
            // char = 0;
            // (function typeIt() {   
            //     var humanize = Math.round(Math.random() * (200 - 30)) + 30;
            //     timeOut = setTimeout(function() {
            //         char++;
            //         var type = html4.substring(0, char);
            //         $rs.html(type);
            //         typeIt();
            //         if (char == txtLen4) {
            //             $rs.html($rs.html().slice(0, -1)); // remove the '|'
            //         }

            //     }, humanize);
            // }());
            

            // function runSerial() {
            // var that = this;
            // task1 is a function that returns a promise (and immediately starts executing)
            // task2 is a function that returns a promise (and immediately starts executing)
        //     return Promise.resolve()
        //         .then(function() {
        //             return that.task1();
        //         })
        //         .then(function() {
        //             return that.task2();
        //         })
        //         .then(function() {
        //             console.log(" ---- done ----");
        //         });
        // }

        //     const sleep = async (ms) => {
        //         return new Promise(resolve => setTimeout(resolve, ms));
        //     }
        //     const asyncInterval = async (callback, ms, triesLeft = 5) => {
        //     return new Promise((resolve, reject) => {
        //         const interval = setInterval(async () => {
        //         if (await callback()) {
        //             resolve();
        //             clearInterval(interval);
        //         } else if (triesLeft <= 1) {
        //             reject();
        //             clearInterval(interval);
        //         }
        //         triesLeft--;
        //         }, ms);
        //     });
        //     }
        </script>
        
<script>
    const wait=ms=>new Promise(resolve => setTimeout(resolve, ms));
      
    function failureCallback(){
        console.log("This is failure callback");
    }
      
    wait(4*1000).then(() => {
        console.log("waited for 4 seconds");
        throw new Error("error occurred");
    }).catch(() => {
        failureCallback();
    });
      
    wait(2*1000).then(() => console.log("waited for 2 seconds"));                    
    </script>

  </body>
</html>